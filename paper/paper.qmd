---
title: "Toronto Paramedic Services"
subtitle: "A deeper look into what is driving high EMS demand in Toronto"
author: 
  - Julia Lee
thanks: "Code and data are available at: https://github.com/JuliaJLee/Toronto_Paramedic_Services.git"
date: today
date-format: long
abstract: "First sentence. Second sentence. Third sentence. Fourth sentence."
format: pdf
number-sections: true
bibliography: references.bib
---

```{r}
#| include: false
#| warning: false
#| message: false

library(tidyverse)
library(tinytex)
library(knitr)
library(ggplot2)
```


# Introduction

"In case of an emergency, please call 911." From building walls to road signs, this is a message that appears almost everywhere, and it instills the idea that no matter the circumstance, there will always be emergency services available to help. However, research shows that this is not the case. A report on Toronto's paramedic services highlights that there were no ambulances available to over 1,000 calls in 2023 @auditorreport. With drastically increasing wait times for those who required EMS (emergency medical services), it is crucial to understand why paramedic services are unable to keep up with a seemingly growing demand for EMS.

In response to this rising challenge, the report posits that in order to elevate the "efficiency and effectiveness" @auditorreport of Toronto's paramedic services, further research on how to manage EMS demand is needed. Thus, this paper seeks to investigate the factors that seem to be driving EMS demand within Toronto. Using Paramedic Services Incident Data offered by Toronto Paramedic Services, the aim is to identify which types of emergencies (e.g. medical emergencies or vehicle accidents) strongly drive EMS demand. Knowing this can help inform effective strategies that allocate resources to these drivers for better EMS demand management. 

With this, this paper first examines the total number of emergency calls made from 2017 to 2022 to better understand how EMS demand has changed over time. Then, it looks at EMS demand through five different incident types as outlined by Toronto Paramedic Services to determine any key drivers of the total EMS demand. As a result, ...

In what follows, the paper will define the data that was used within this analysis, provide a detailed account of the results, and put forth a meaningful reflection of the analysis along with its limitations and next steps.

# Data

Paramedic Services Incident Data (2017-2022) is provided by Toronto Paramedic Services [@torontoparamedicservices]. The records of when a paramedic was dispatched having received a call, they type of incident, the priority level of each incident, the number of paramedic units that arrived at the scene, and the general location of each incident are all updated by hand to the city of Toronto's Open Data portal [@opentorontodata]. 

To simulate, test, download, and clean the Paramedic Services Incident Data (2017-2022), the statistical programming language R was used [@citeR]. Specific libraries that assisted the analysis include `tidyverse` [@tidyverse], `dplyr` [@dplyr], `opendatatoronto` [@opendatatoronto], `tinytex` [@tinytex], `ggplot2` [@ggplot2], and `knitr` [@knitr]. 

The Paramedic Services Incident Data is refreshed annually and contains information on every single incident paramedics have responded to since January 1st to December 31st in 2017 to 2022. For every day of each year, there are multiple records of incidents that have occurred. For every record, there is an ID number, the date and time when a paramedic unit was dispatched, the type of incident, the severity of the incident (priority), the number of paramedic units at the scene, and the general location of the incident. @tbl-rawdata below previews this information for recorded incidents in 2022.

```{r}
#| echo: false
#| message: false
#| label: tbl-rawdata
#| tbl-cap: "Paramedic Services Incident Data for 2022" 

data <- read_csv(here::here("data/raw_data/raw_data_2022.csv"))

data <- 
 data |> 
  select(-...1)

data |>
  slice(1:6) |>
  kable(
    col.names = c("ID", "Dispatch Time", "Incident Type", "Priority", 
                  "Units Arrived", "Location"),
    digits = 1,
    booktabs = TRUE,
    linesep = "",
    align = c("l", "l", "l", "l", "l", "l"),
    format.args = list(big.mark = ",")
  )

```

For this analysis, the variables of interest within this analysis are the different incident types that are recorded. This dataset lists five different incident types: medical emergencies, vehicle accidents, emergency transfers, fires, and airport standbys. These types refer to different circumstances under which individuals may call 911 for EMS. 

# Results

## EMS Demand from 2017 to 2022

```{r}
#| echo: false 
#| message: false
#| label: fig-totalemsdemand
#| fig-cap: Total EMS Demand for Each Year between 2017 and 2022

data <- read_csv(here::here("data/analysis_data/analysis_data.csv"))

ggplot(data, aes(x = Year, y = Total_Emergency_Calls)) + 
  geom_line(linewidth = 0.5, color="black") + geom_point(colour = "black") +
  ylim(200000,300000) + theme_light() + 
  ggtitle("EMS Demand From 2017 to 2022)") +
  xlab("Year") + ylab("Demand for EMS") + 
  theme(plot.title = element_text(hjust = 0.5)) 
```
@fig-totalemsdemand displays the total number of emergency calls for each year. The total number of emergency calls appears to increase in 2020 after a notable decrease in 2019. This pattern likely reflects the the onset of the covid-19 pandemic. Though the number of emergency calls appears to fluctuate over the years, the change is not drastic, indicating that there has consistently been a heightened demand for EMS within Toronto.

To further unpack what is driving this consistent demand, each individual incident type is also considered.

```{r}
#| echo: false 
#| message: false
#| label: fig-incidentemsdemand
#| fig-cap: EMS Demand for Each Year between 2017 and 2022

data <- read_csv(here::here("data/analysis_data/analysis_data.csv"))

ggplot(data, aes(x = Year)) + 
  geom_line(aes(y = Total_Emergency_Calls), size = 0.5, colour = "black") +
  geom_line(aes(y = Medical_Emergency_Calls), size = 0.5, colour = "blue") +
  geom_line(aes(y = Vehicle_Accident_Calls), size = 0.5, colour = "red") +
  geom_line(aes(y = Emergency_Transfer_Calls), size = 0.5, colour = "green") +
  geom_line(aes(y = Fire_Calls), size = 0.5, colour = "orange") +
  geom_line(aes(y = Airport_Standby_Calls), size = 0.5, colour = "purple")
```

# Discussion

## First discussion point {#sec-first-point}

If my paper were 10 pages, then should be be at least 2.5 pages. The discussion is a chance to show off what you know and what you learnt from all this. 

## Second discussion point

## Third discussion point

## Weaknesses and next steps

Weaknesses and next steps should also be included.


\newpage


# References


